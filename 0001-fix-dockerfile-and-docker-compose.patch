From ad9b8173d1068f74e7a4db665fe3343f86fb7365 Mon Sep 17 00:00:00 2001
From: Maxime Kuhn <pingouin2032.maxime@gmail.com>
Date: Wed, 27 Aug 2025 00:33:23 +0200
Subject: [PATCH] fix dockerfile and docker-compose

---
 .gitignore         |  3 ++-
 docker-compose.yml | 10 ++++------
 dockerfile         |  2 +-
 entrypoint.sh      |  6 +++---
 4 files changed, 10 insertions(+), 11 deletions(-)
 mode change 100644 => 100755 entrypoint.sh

diff --git a/.gitignore b/.gitignore
index e37069d..4306268 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,4 +1,5 @@
 node_modules
 /src/generated/prisma
 prisma
-generated
\ No newline at end of file
+generated
+/src/generated/prisma
diff --git a/docker-compose.yml b/docker-compose.yml
index 3949f1d..d165be6 100644
--- a/docker-compose.yml
+++ b/docker-compose.yml
@@ -1,12 +1,10 @@
-version: "3.8"
-
 services:
   api:
     build: .
     ports:
       - "3000:3000"
-    environment:
-      DATABASE_URL: postgresql://myuser:mypassword@db:5432/mydb?schema=public
-  
     volumes:
-    - db.sqlite3:/usr/src/app/prisma/dev.db
+    - db_data:/usr/src/app/prisma
+
+volumes:
+  db_data:
diff --git a/dockerfile b/dockerfile
index 1dd9e7b..400db6f 100644
--- a/dockerfile
+++ b/dockerfile
@@ -21,4 +21,4 @@ COPY entrypoint.sh .
 RUN chmod +x entrypoint.sh
 
 # Start app using the compiled JS
-ENTRYPOINT ["./entrypoint.sh"]
+ENTRYPOINT ["sh", "./entrypoint.sh"]
diff --git a/entrypoint.sh b/entrypoint.sh
old mode 100644
new mode 100755
index d24d5bb..bd73b67
--- a/entrypoint.sh
+++ b/entrypoint.sh
@@ -1,6 +1,6 @@
-#!/bin/sh
-set -e
+#!/usr/bin/env sh
+echo "Running database hola..."
 echo "Running database migrations..."
 npx prisma migrate deploy
 echo "Starting server..."
-npm run start
\ No newline at end of file
+npm run start
-- 
2.39.5 (Apple Git-154)

